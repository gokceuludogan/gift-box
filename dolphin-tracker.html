<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üê¨ Project: UNSTOPPABLE</title>
    <style>
        :root {
            --ocean-dark: #0f2027;
            --ocean-mid: #203a43;
            --ocean-light: #2c5364;
            --accent: #4facfe;
            --accent-glow: #00f2fe;
            --text: #ffffff;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Courier New', Courier, monospace;
            background: linear-gradient(to bottom, var(--ocean-dark), var(--ocean-light));
            color: var(--text);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            position: relative;
            user-select: none;
        }

        .bubble {
            position: absolute;
            bottom: -50px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            animation: rise 10s infinite ease-in;
            z-index: 0;
            pointer-events: none;
        }

        @keyframes rise {
            0% { bottom: -50px; transform: translateX(0); }
            50% { transform: translateX(20px); }
            100% { bottom: 110vh; transform: translateX(-20px); }
        }

        .container {
            position: relative;
            z-index: 10;
            background: rgba(15, 32, 39, 0.85);
            padding: 2rem;
            border-radius: 20px;
            border: 1px solid rgba(79, 172, 254, 0.3);
            box-shadow: 0 0 50px rgba(79, 172, 254, 0.2);
            text-align: center;
            max-width: 420px;
            width: 90%;
            backdrop-filter: blur(10px);
            transition: transform 0.3s ease;
        }

        h1 {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            letter-spacing: 3px;
            text-transform: uppercase;
            color: var(--accent);
            text-shadow: 0 0 10px rgba(79, 172, 254, 0.5);
        }

        .status-badge {
            background: rgba(255, 71, 87, 0.2);
            color: #ff6b81;
            border: 1px solid #ff4757;
            padding: 4px 10px;
            border-radius: 50px;
            font-size: 0.65rem;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* --- VISUAL WRAPPER --- */
        .visual-wrapper {
            position: relative;
            height: 120px;
            width: 100%;
            margin-bottom: 15px;
            overflow: hidden; 
            border-radius: 12px;
            background: rgba(0,0,0,0.15); 
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .water-line {
            position: absolute;
            bottom: 15px;
            left: 0;
            width: 100%;
            height: 1px;
            background: rgba(79, 172, 254, 0.3);
            z-index: 0;
        }

        /* --- DOLPHIN STATES --- */

        /* 1. DEFAULT IDLE STATE (Centered, Floating) */
        .dolphin-carrier {
            position: absolute;
            width: 60px;
            height: 60px;
            top: 55%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2;
            transition: all 0.5s ease; /* Smooth transition between modes */
        }

        /* 2. JUMPING STATE (Path Animation) */
        .dolphin-carrier.patrolling {
            top: 0; left: 0; transform: none; /* Release center lock */
            /* The Multi-Jump Path */
            offset-path: path('M -50 120 Q 30 0 110 120 Q 190 0 270 120 Q 350 0 500 120');
            offset-rotate: auto 0deg; 
            animation: patrol-hops 2.5s linear infinite;
        }

        @keyframes patrol-hops {
            0% { offset-distance: 0%; opacity: 0; }
            5% { opacity: 1; }
            95% { opacity: 1; }
            100% { offset-distance: 100%; opacity: 0; }
        }

        /* VISUAL (The Emoji) */
        .dolphin-visual {
            font-size: 3rem; 
            transform: scaleX(-1);
            filter: drop-shadow(0 5px 8px rgba(0,0,0,0.5));
            will-change: transform;
        }

        /* Gentle float when idle */
        .dolphin-carrier:not(.patrolling) .dolphin-visual {
            animation: float-idle 3s ease-in-out infinite;
        }

        @keyframes float-idle {
            0%, 100% { transform: scaleX(-1) translateY(0); }
            50% { transform: scaleX(-1) translateY(-10px); }
        }

        /* --- TRICK ANIMATIONS --- */
        .trick-spin { animation: spin-flip 0.6s ease-in-out !important; }
        @keyframes spin-flip {
            0% { transform: scaleX(-1) rotate(0deg); }
            100% { transform: scaleX(-1) rotate(360deg); }
        }

        .trick-gulp { animation: gulp 0.3s ease-in-out !important; }
        @keyframes gulp {
            0% { transform: scaleX(-1) scale(1); }
            50% { transform: scaleX(-1) scale(1.3); }
            100% { transform: scaleX(-1) scale(1); }
        }

        /* Splash Effect */
        .splash-visual {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 2rem;
            opacity: 0;
            pointer-events: none;
            z-index: 1;
        }
        .splash-active { animation: splash 0.5s ease-out; }
        @keyframes splash {
            0% { opacity: 1; transform: translateX(-50%) scale(0.5); }
            50% { opacity: 1; transform: translateX(-50%) scale(1.2) translateY(-15px); }
            100% { opacity: 0; transform: translateX(-50%) scale(1.5) translateY(-5px); }
        }

        .snack {
            position: absolute;
            font-size: 1.5rem;
            z-index: 1;
            opacity: 1;
            pointer-events: none;
        }

        /* CONTROLS */
        .controls {
            display: flex;
            gap: 8px;
            justify-content: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .btn {
            border: none;
            border-radius: 50px;
            padding: 10px 16px;
            color: #0f2027;
            font-family: 'Courier New', Courier, monospace;
            font-weight: bold;
            font-size: 0.8rem;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            transition: transform 0.1s, box-shadow 0.2s, filter 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .btn:hover { transform: translateY(-2px); filter: brightness(1.1); }
        .btn:active { transform: translateY(1px); }

        .feed-btn { background: linear-gradient(135deg, var(--accent), #00f2fe); }
        .trick-btn { background: linear-gradient(135deg, #ff9ff3, #feca57); }
        
        /* New Jump Button Style */
        .jump-btn { 
            background: linear-gradient(135deg, #55efc4, #00b894); 
            width: 100%; /* Full width for the toggle */
            justify-content: center;
        }
        .jump-btn.active {
            background: linear-gradient(135deg, #ff7675, #d63031); /* Red to stop */
        }

        .feed-counter {
            font-size: 0.65rem;
            color: var(--accent-glow);
            margin-top: 5px;
            opacity: 0.8;
            height: 1rem;
        }

        .data-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 8px;
            text-align: left;
            background: rgba(0,0,0,0.2);
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 15px;
            border: 1px solid rgba(255,255,255,0.05);
        }

        .data-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px dashed rgba(255,255,255,0.1);
            padding-bottom: 5px;
        }
        .data-row:last-child { border-bottom: none; padding-bottom: 0; }

        .label { color: #8899a6; font-size: 0.7rem; text-transform: uppercase; letter-spacing: 1px;}
        .value { color: var(--accent-glow); font-weight: bold; font-size: 0.85rem; text-align: right; max-width: 70%;}

        .log-container {
            background: rgba(0, 0, 0, 0.3);
            padding: 12px;
            border-radius: 8px;
            border-left: 3px solid var(--accent);
        }

        .log-entry {
            font-family: 'Courier New', Courier, monospace;
            font-style: italic;
            font-size: 0.75rem;
            line-height: 1.4;
            color: #eee;
        }

        .footer {
            margin-top: 20px;
            font-size: 0.6rem;
            color: rgba(255,255,255,0.2);
            line-height: 1.4;
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="status-badge" id="status-badge">SIGNAL: ENCRYPTED</div>
        <h1>Subject: "Breezy"</h1>
        
        <div class="visual-wrapper" id="scene">
            <div class="water-line"></div>
            <div id="carrier" class="dolphin-carrier">
                <div class="dolphin-visual" id="dolphin">üê¨</div>
            </div>
            <div class="splash-visual" id="splash">üí¶</div>
        </div>

        <div class="controls">
            <button class="btn feed-btn" onclick="manualFeed()">
                <span>üêü</span> FEED
            </button>
            <button class="btn trick-btn" onclick="manualTrick()">
                <span>üéº</span> WHISTLE
            </button>
            <button class="btn jump-btn" id="jump-btn" onclick="togglePatrol()">
                <span>üåä</span> START JUMP MODE
            </button>
        </div>
        
        <div class="feed-counter" id="counter-display">Snacks sent: 0</div>

        <div class="data-grid">
            <div class="data-row">
                <span class="label">DATE</span>
                <span class="value" id="date-display">...</span>
            </div>
            <div class="data-row">
                <span class="label">LOCATION</span>
                <span class="value" id="loc-display">Triangulating...</span>
            </div>
            <div class="data-row">
                <span class="label">DEPTH</span>
                <span class="value" id="depth-display">---</span>
            </div>
            <div class="data-row">
                <span class="label">STATE</span>
                <span class="value" id="mood-display">Loading...</span>
            </div>
        </div>

        <div class="log-container">
            <div class="log-entry" id="log-display">
                "Establishing secure connection..."
            </div>
        </div>

        <div class="footer">
            TRACKING ID: #CUSTOMS_EVADER_v2.0 <br>
            STATUS: DIGITAL DELIVERY 100% <br>
            Hosting provided by the World Wide Ocean
        </div>
    </div>

<script>
    // --- STATE MANAGEMENT ---
    let isBusy = false; 
    let isPatrolling = false; // Default: False (Still)
    let snacks = 0;
    let autoLogTimer = null;

    // --- MODE TOGGLE ---
    function togglePatrol() {
        if (isBusy) return;

        isPatrolling = !isPatrolling;
        const carrier = document.getElementById('carrier');
        const btn = document.getElementById('jump-btn');

        if (isPatrolling) {
            carrier.classList.add('patrolling');
            btn.innerHTML = "<span>üõë</span> STOP JUMPS";
            btn.classList.add('active');
            updateStateDisplay("Patrolling");
        } else {
            carrier.classList.remove('patrolling');
            btn.innerHTML = "<span>üåä</span> START JUMP MODE";
            btn.classList.remove('active');
            updateStateDisplay("Idle");
        }
    }

    // --- INTERACTION ---

    function manualFeed() {
        if (isBusy) return;
        isBusy = true;
        
        // Temporarily stop patrol visual if active
        const carrier = document.getElementById('carrier');
        const wasPatrolling = carrier.classList.contains('patrolling');
        carrier.classList.remove('patrolling'); // Force to center for feeding

        setTimeout(feedDolphin, 50, wasPatrolling);
    }

    function feedDolphin(wasPatrolling) {
        const dolphin = document.getElementById('dolphin');
        const scene = document.getElementById('scene');
        
        const fish = document.createElement('div');
        fish.className = 'snack';
        const fishTypes = ["üêü", "üê†", "üê°", "ü¶ê", "ü¶ë"];
        fish.innerText = fishTypes[Math.floor(Math.random() * fishTypes.length)];
        
        const startSide = Math.random() > 0.5 ? 'left' : 'right';
        const startX = startSide === 'left' ? -100 : 100;
        
        fish.style.transform = `translate(${startX}px, -10px)`;
        scene.appendChild(fish);

        const swim = fish.animate([
            { transform: `translate(${startX}px, -10px) scale(1)`, opacity: 1 },
            { transform: `translate(0px, 0px) scale(0.5)`, opacity: 0 }
        ], { duration: 500, easing: 'ease-in' });

        swim.onfinish = () => {
            fish.remove();
            dolphin.classList.add('trick-gulp'); 
            snacks++;
            document.getElementById('counter-display').innerText = `Snacks sent: ${snacks}`;
            
            setTimeout(() => {
                dolphin.classList.remove('trick-gulp');
                finishInteraction(wasPatrolling);
            }, 400); 
        };
    }

    function manualTrick() {
        if(isBusy) return;
        isBusy = true;
        
        const carrier = document.getElementById('carrier');
        const wasPatrolling = carrier.classList.contains('patrolling');
        carrier.classList.remove('patrolling'); // Force to center
        
        setTimeout(() => {
            const dolphin = document.getElementById('dolphin');
            const splash = document.getElementById('splash');
            
            dolphin.classList.add('trick-spin');

            setTimeout(() => {
                splash.classList.remove('splash-active');
                void splash.offsetWidth;
                splash.classList.add('splash-active');
            }, 300);

            setTimeout(() => {
                dolphin.classList.remove('trick-spin');
                finishInteraction(wasPatrolling);
            }, 700);
        }, 50);
    }

    // Restore previous state after interaction
    function finishInteraction(wasPatrolling) {
        const carrier = document.getElementById('carrier');
        isBusy = false;
        
        // Only resume patrolling if the global flag is still true 
        // AND it was patrolling before (handles cases where user toggled off during feed)
        if (isPatrolling) {
            carrier.classList.add('patrolling');
        }
    }

    // --- AUTONOMOUS LOG UPDATES ---
    function resetLogTimer() {
        if (autoLogTimer) clearTimeout(autoLogTimer);
        const delay = Math.random() * 8000 + 8000; 
        
        autoLogTimer = setTimeout(() => {
            updateTracker();
            resetLogTimer();
        }, delay);
    }

    // --- DATA & SETUP ---
    const locations = ["Pacific (Idle)", "Coral Sea", "Atlantic Current", "Indian Ocean", "Mediterranean", "Arctic Circle"];
    const moods = ["Chill", "Hungry", "Observant", "Sleepy", "Waiting", "Zen"];
    const logs = [
        "Scanning for fish signatures.", 
        "Updates installed successfully.", 
        "Hiding inside a cloud reflection.", 
        "Buffering ocean textures...", 
        "Waiting for input.", 
        "Analyzing water temperature."
    ];

    function updateStateDisplay(stateOverride) {
        if(stateOverride) {
            document.getElementById('mood-display').innerText = stateOverride;
        } else {
             document.getElementById('mood-display').innerText = moods[Math.floor(Math.random() * moods.length)];
        }
    }

    function updateTracker() {
        const today = new Date();
        document.getElementById('date-display').innerText = today.toLocaleDateString();
        document.getElementById('loc-display').innerText = locations[Math.floor(Math.random() * locations.length)];
        if(!isPatrolling) updateStateDisplay(); // Only randomize mood if not explicitly patrolling
        document.getElementById('depth-display').innerText = isPatrolling ? "Surface" : "15 meters";
        document.getElementById('log-display').innerText = `"${logs[Math.floor(Math.random() * logs.length)]}"`;
    }

    function createBubbles() {
        const body = document.body;
        for (let i = 0; i < 15; i++) {
            let bubble = document.createElement('div');
            bubble.className = 'bubble';
            let size = Math.random() * 15 + 5 + 'px';
            bubble.style.width = size;
            bubble.style.height = size;
            bubble.style.left = Math.random() * 100 + 'vw';
            bubble.style.animationDuration = (Math.random() * 10 + 5) + 's';
            bubble.style.animationDelay = Math.random() * 5 + 's';
            body.appendChild(bubble);
        }
    }

    updateTracker();
    createBubbles();
    resetLogTimer();

</script>
</body>
</html>
